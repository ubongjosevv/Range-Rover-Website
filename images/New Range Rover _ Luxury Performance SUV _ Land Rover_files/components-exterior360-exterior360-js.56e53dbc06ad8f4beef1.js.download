(window.webpackJsonp=window.webpackJsonp||[]).push([[44,41],{120:function(t,e,i){"use strict";i.d(e,"d",(function(){return s})),i.d(e,"c",(function(){return a})),i.d(e,"e",(function(){return n})),i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return h}));const s=(t,e)=>{t.parentNode.insertBefore(e,t),e.appendChild(t)},a=t=>{const e=t.parentNode;for(;t.firstChild;)e.insertBefore(t.firstChild,t);e.removeChild(t)},n=(t,e)=>{const i=(s=t)instanceof NodeList?[...s]:[s];var s;if(!i.length)return;i[0].parentNode.insertBefore(e,i[0]),i.forEach(t=>e.appendChild(t))},o=(t,e)=>t.parentNode.insertBefore(e,t.nextSibling),h=(t,e)=>t.parentNode.insertBefore(e,t)},25:function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return o}));var s=i(106),a=i.n(s),n=i(120);class o{constructor(t,e){this.element=t,this.slider=null,this.customConnectNamespace="DxRangeSlider-custom-connects",this.dataNameSpace="data-dxrangeslider-",this.dataConnectIndex=this.dataNameSpace+"index",this.dataIsInitialised=this.dataNameSpace+"init";const i=e.start.length>1,s=i?14:25;this.options=Object.assign({},o.defaults,{customConnectSpacing:s,smallHandles:i},e),this.createSlider()}updateOptions(t){this.options=Object.assign(this.options,t)}createStartArray(){const{start:t}=this.options;return Array.isArray(t)?t:[t]}createSlider(){this.isInitialised()||(this.options.start=this.createStartArray(),this.createCustomConnects(),this.addCustomClasses(),this.initSlider(),this.createCustomControls(),this.addCustomConnectEvents())}addCustomClasses(){const{modifierClass:t,smallHandleClass:e}=o.classes;this.element.classList.add(`${t}${this.options.direction}`),this.element.classList.add(`${t}${this.options.theme}`),this.element.classList.add(`${t}${this.options.sliderType}`),this.options.smallHandles&&this.element.classList.add(`${t}${e}`)}initSlider(){this.slider=noUiSlider.create(this.element,this.options);[...this.element.querySelectorAll(".noUi-touch-area")].forEach(t=>{t.addEventListener("mousedown",()=>{a.a&&a.a.fn.FocusSwitcher&&a()("body").FocusSwitcher("removeFocusClass")})}),this.setInitStatus("true")}destroySlider(){const{modifierClass:t,smallHandleClass:e,customConnectClass:i,handleControlClass:s}=o.classes;this.element.classList.remove(e),this.element.classList.remove(`${t}${this.options.direction}`),this.element.classList.remove(`${t}${this.options.theme}`),this.element.classList.remove(`${t}${this.options.sliderType}`),this.slider.off("."+this.customConnectNamespace);this.element.querySelectorAll("."+i).forEach(t=>t.parentNode.removeChild(t));this.element.querySelectorAll("."+s).forEach(t=>t.parentNode.removeChild(t)),this.slider.destroy(),this.setInitStatus(null)}isInitialised(){return this.element.getAttribute(this.dataIsInitialised)}setInitStatus(t){this.element.setAttribute(this.dataIsInitialised,!!t||"")}createCustomConnects(){const{customConnectClass:t}=o.classes,e=e=>{const i=document.createElement("div");return i.classList.add(t),0===e&&i.classList.add(t+"--first"),e===this.options.start.length&&i.classList.add(t+"--last"),i.setAttribute(this.dataConnectIndex,e),i};this.element.appendChild(e(0)),this.options.start.forEach((t,i)=>this.element.appendChild(e(i+1)))}addCustomConnectEvents(){const t="ltr"===this.options.direction?"left":"right",e=[...this.element.querySelectorAll(`[${this.dataConnectIndex}]`)];this.slider.on("update."+this.customConnectNamespace,(...i)=>{const s=i[4];e.forEach((i,a)=>{const n=i,o=0===a,h=!e[a+1];if(o)return n.style.width=`calc(${s[0]}% - ${this.options.customConnectSpacing}px)`,void(n.style[t]="0px");if(h)return n.style.width=`calc(100% - ${s[a-1]}% - ${this.options.customConnectSpacing}px)`,void(n.style[t]=`calc(${s[a-1]}% + ${this.options.customConnectSpacing}px)`);const d=2*this.options.customConnectSpacing;n.style.width=`calc(${s[a]}% - ${s[a-1]}% - ${d}px)`,n.style[t]=`calc(${s[a-1]}% + ${this.options.customConnectSpacing}px)`})})}createCustomControls(){const t=(t,e)=>{const{handleControlClass:i}=o.classes,s=document.createElement("button");return s.classList.add(i),s.classList.add(`${i}${e}`),s.innerHTML=t,s},e=this.getHandlesWrapper(),i=document.createElement("div");i.setAttribute("aria-live","polite"),i.classList.add("visuallyHidden"),Object(n.a)(e,i),this.getHandles().forEach((s,a)=>{const{labels:o}=this.options,h=t(o.decrement[a],"--decrement"+a),d=t(o.increment[a],"--increment"+a),l={decrementElement:h,incrementElement:d};Object(n.b)(e,h),Object(n.a)(e,d),this.setInitialButtonStateA11Y(l),h.addEventListener("click",t=>{t.preventDefault(),this.handleDecrement(a,l),i.innerHTML=s.getAttribute("aria-valuetext")}),d.addEventListener("click",t=>{t.preventDefault(),this.handleIncrement(a,l),i.innerHTML=s.getAttribute("aria-valuetext")})})}setInitialButtonStateA11Y(t){(this.options.start[0]===this.options.range.min||this.options.start[0]===this.options.range.max)&&this.constructor.toggleDisabledStateA11y(t.decrementElement)}handleIncrement(t,e){const i=this.slider.steps(),s=i&&i[t][1];if(!s)return void this.constructor.toggleDisabledStateA11y(e.incrementElement);const a=this.getHandleValue(t);this.slider.setHandle(t,a+s),this.constructor.toggleDisabledStateA11y(e.decrementElement,!0)}handleDecrement(t,e){const i=this.slider.steps(),s=i&&i[t][0];if(!s)return void this.constructor.toggleDisabledStateA11y(e.decrementElement);const a=this.getHandleValue(t);this.slider.setHandle(t,a-s),this.constructor.toggleDisabledStateA11y(e.incrementElement,!0)}static toggleDisabledStateA11y(t,e=!1){!0===e?t.removeAttribute("disabled"):t.setAttribute("disabled","disabled")}getHandleValue(t){const e=this.slider.get();return Number("string"==typeof e?e:e[t])}getHandlesWrapper(){return this.element.querySelector(".noUi-base")}getHandles(){return[...this.element.querySelectorAll(".noUi-handle")]}getSlider(){return this.slider}connectHorizontalDragDealer(t){const e=e=>this.slider.on(e,e=>t.setValue(e[0]/100,0,!1));["update","start","end"].forEach(t=>e(t))}}o.defaults={theme:"light",direction:"ltr",sliderType:"range",labels:{decrement:["Decrease slider 1","Decrease slider 2"],increment:["Increase slider 1","Increase slider 2"]}},o.classes={modifierClass:"DxRangeSlider--",customConnectClass:"DxRangeSlider__custom-connect",handleControlClass:"DxRangeSlider__handle-control",smallHandleClass:"small-handles"}},70:function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return o}));var s=i(25),a=i(102),n=i(105);class o{constructor(t){this.el=t,this.init()}init(){this.authorMode="";const t={width:null,height:null,data:null,images:null,currentImage:null,_isInsideTabbedContainer:!1,headerBoxHidden:!1,_dxRangeSlider:null,imageSize:Object(n.h)()?"mobile":"desktop",breakpointSmall:null,breakpointMedium:null,breakpointLarge:null,sliderUpdateLimiter:!0,loaded:!1,rect:null,changeTotal:0,imageIndex:1,loadedImagesCount:0,loadedImages:[],headerBox:null,a11yLabels:{},mouse:{x:0,down:!1,lastMove:{x:0}},imageOffset:{x:0,y:0},_events:{start:null,stop:null,move:null,touch:!0},uiSelectors:{headerBox:".headerBox",rangeSliderWrapper:".Exterior360__slider",canvasContainer:".Exterior360__canvas-container",loadButtonContainer:".Exterior360__init-container",interactToggle:".Exterior360__load-button"},init(){this.data=this.$element.data("frames"),this.images=this.data[this.imageSize],this.a11yLabels={sliderDecrease:this.$element.attr("data-label-decrease-slider"),sliderIncrease:this.$element.attr("data-label-increase-slider")},this.authorMode=$("#authorM").val(),this._setupGoAnimation(),this._createCanvas(),this._handleEventBinding(),this._tabbedContainerBehaviour(),this._preloadFirst()},_setupGoAnimation(){const t=["left","right"];let e=0,i=null;const s=()=>{this.ui("interactToggle").removeClass(i),this.ui("interactToggle").addClass(t[e]),i=t[e],e+=1,e>=t.length?(e=0,this._animationTimeout=setTimeout(s.bind(this),2e3)):this._animationTimeout=setTimeout(s.bind(this),800)};this._animationTimeout=setTimeout(s.bind(this),800)},_createCanvas(){this.$element.find("canvas")&&this.$element.find("canvas").remove(),this.canvas=document.createElement("canvas"),this.canvas.classList.add("Exterior360__canvas"),this.ctx=this.canvas.getContext("2d"),this.ctx.mozImageSmoothingEnabled="false",this.ctx.webkitImageSmoothingEnabled="false",this.ctx.msImageSmoothingEnabled="false",this.ctx.imageSmoothingEnabled="false",this.ui("canvasContainer").prepend(this.canvas),this._setSize(),this.$element.addClass("Exterior360--canvas-loaded")},_handleEventBinding(){this.$element.on("first-image-loaded",this._draw.bind(this)),this.ui("interactToggle").on("tap click",this._startLoading.bind(this)),window.addEventListener("resize",this._setSize.bind(this)),this.data.showSlider||this._bindMouseEvents()},_bindMouseEvents(){this._getEvents(),this.canvas.addEventListener(this._events.start,t=>{this.mouse.x=this._getCoordinate(t,"x"),this.mouse.lastMove.x=this._getCoordinate(t,"x"),this.mouse.down=!0}),this.canvas.addEventListener(this._events.move,t=>{this.mouse.down&&(this.sliderUpdateLimiter=!0,this.mouse.x=this._getCoordinate(t,"x"),this._calculateMouseMovement(),this.loaded&&this._updateImage(),this._draw())}),this.canvas.addEventListener(this._events.stop,()=>{this.changeTotal=0,this.mouse.down=!1})},_tabbedContainerBehaviour(){const t=this.$element.parents(".TabbedContainer");this._isInsideTabbedContainer=!!t.length,t.on("tabChanged",()=>{this.ui("interactToggle").show()})},_preloadFirst(t){const e=t||1,i=new Image;i.src=this.images[e],i.onload=()=>{this.currentImage=i,this.loadedImages[e]=i,Object(a.h)(this.element,"first-image-loaded")}},_startLoading(t){Object(a.a)(this.ui("loadButtonContainer").get(0)),setTimeout(()=>{this._loadImage(),this._initialiseDxRangeSlider()},1e3),this.$element.off(t)},_initialiseDxRangeSlider(){if(!this.data.showSlider)return;this.ui("rangeSliderWrapper").addClass("Exterior360__slider--visible").html('<div class="DxRangeSlider"></div>');const t=this.$element.find(".DxRangeSlider").get(0),e={start:0,step:1,theme:"exterior360",range:{min:0,max:this.images.length},direction:site.rtl?"rtl":"ltr",labels:{decrement:[this.a11yLabels.sliderDecrease],increment:[this.a11yLabels.sliderIncrease]}},i=new s.default(t,e);this._dxRangeSlider=i.getSlider(),this._dxRangeSlider.on("update",t=>{if(!this.sliderUpdateLimiter){this.changeTotal=1;const e=Math.ceil(t[0]);this.currentImage=this.loadedImages[e],this._draw()}this.sliderUpdateLimiter=!1}),this._dxRangeSlider.on("end",()=>{this.changeTotal=0,this._updateHeaderBox()})},_getCoordinate(t,e){return this._events.touch&&"x"===e?t.touches[0].clientX:this._events.touch||"x"!==e?0:t.clientX},_onFinish(){this.loaded=!0,Object(a.s)(this.ui("loadButtonContainer").get(0)),this.ui("interactToggle").hide()},_imageHasLoaded(){this.loadedImagesCount+=1,this._loadImage()},_loadImage(){if(this.loadedImagesCount<this.images.length){const t=this.loadedImagesCount;this.loadedImages[t]=new Image,this.loadedImages[t].onload=this._imageHasLoaded.bind(this),this.loadedImages[t].src=this.images[t]}else this.loaded=!0,Object(a.s)(this.ui("loadButtonContainer").get(0)),this.ui("interactToggle").hide()},_getEvents(){const t=$("html").hasClass("touchCapability");this._events={start:t?"touchstart":"mousedown",stop:t?"touchend":"mouseup",move:t?"touchmove":"mousemove",touch:!!t}},_setSize(){this.breakpointSmall=Object(n.h)(),this.breakpointMedium=Object(n.g)(),this.breakpointLarge=!Object(n.g)()&&!Object(n.h)(),this.widthcal=$("body").innerWidth(),this.widthcal>=1920?this.width=$("body").innerWidth()-260:this.widthcal>=1280&&this.widthcal<=1919.9?this.width=$("body").innerWidth()-120:(this.widthcal>=768&&this.widthcal,this.width=$("body").innerWidth()),"author"===this.authorMode?this.height=600:this.height=window.innerHeight-Object(a.k)(this.$element.offset().top,!1),this.imageOffset.y=0,this.imageOffset.x=0,this.calculatedWidth=this.width,this.calculatedHeight=Math.round(this.calculatedWidth/16*9),this.height=this.calculatedHeight,this.breakpointSmall||this.breakpointMedium?this.height=this.width/16*9:this.height<this.calculatedHeight?this.imageOffset.y=Math.round((this.height-this.calculatedHeight)/2):this.calculatedHeight<this.height&&(this.calculatedHeight=this.height,this.calculatedWidth=Math.round(this.height/9*16),this.imageOffset.x=-Math.round((this.calculatedWidth-this.width)/2)),this.canvas.height=Math.round(this.height),this.canvas.width=Math.round(this.width),this.tabbedContainer&&(this.breakpointSmall?setTimeout(()=>{this.$element.height(this.height+this.ui("headerBox").height())},500):this.$element.height(this.height)),this._draw(),this._centerHeaderBox()},_calculateMouseMovement(){const t=this.mouse.x-this.rect.left;this.changeTotal+=t-this.mouse.lastMove.x,this.mouse.lastMove.x=t},_drawCanvasImage(){this.currentImage&&this.ctx.drawImage(this.currentImage,this.imageOffset.x,this.imageOffset.y,this.calculatedWidth,this.calculatedHeight)},_updateCurrentImage(){this.currentImage=this.loadedImages[this.imageIndex]},_centerHeaderBox(){if(!this.breakpointSmall){this.ui("headerBox").width("auto").height("auto").HeaderBox();const t=this.ui("headerBox").height(),e=(this.canvas.height-t)/2;this.ui("headerBox").css({top:e})}this._positionContent()},_positionContent(){let t="";window.innerWidth<1400&&!this.breakpointSmall&&0!==this.ui("headerBox").length&&(t=this.ui("headerBox").offset().left+this.ui("headerBox").width()-this.$element.offset().left+(this.$element.width()-(this.ui("headerBox").offset().left+this.ui("headerBox").width()-this.$element.offset().left))/2),this.ui("loadButtonContainer").css({left:t})},_resetHeaderBox(){this.headerBoxHidden=!1,this.ui("headerBox").show(),this.ui("headerBox").transition({opacity:1,duration:400},"ease")},_updateHeaderBox(){this.breakpointSmall||(0===this.changeTotal||this.headerBoxHidden?this.headerBoxHidden&&(clearTimeout(this.headerBoxTimeout),this.headerBoxTimeout=setTimeout(this._resetHeaderBox.bind(this),2e3)):(this.headerBoxHidden=!0,this.ui("headerBox").transition({opacity:0},400,"ease",()=>{this.ui("headerBox").hide()})))},_updateImage(){if(this.changeTotal>20||this.changeTotal<-20){const t=Math.sign(this.changeTotal);this.changeTotal=0,this.imageIndex=1===t?this.imageIndex+1:this.imageIndex-1,this.imageIndex>=this.images.length?this.imageIndex=0:this.imageIndex<=0&&(this.imageIndex=this.images.length),this._updateCurrentImage()}},_draw(){this.rect=this.canvas.getBoundingClientRect(),this._drawCanvasImage(),this._updateHeaderBox(),this.ctx.save(),this.ctx.fillStyle="#fc00cf",this.ctx.restore()},_debug(){const t={mouseX:this.mouse.x,mouseY:this.mouse.y,mousedown:this.mouse.down,actualMouseX:this.mouse.x-this.rect.left,actualMouseY:this.mouse.y-this.rect.top,changeTotal:this.changeTotal,loadedImagesCount:this.loadedImagesCount,cursorAlpha:this.cursorAlpha};let e=1;Object.keys(t).forEach(i=>{this.ctx.fillStyle="#fff",this.ctx.font="18px Georgia",this.ctx.fillText(`${i}: ${t[i]}`,10,20*e),e+=1})}};let e=(new Date).getMilliseconds();jQuery.createComponent("Exterior360"+e,t);const i=$(this.el);setTimeout(()=>{i.parents(".TabbedContainer").length||i["Exterior360"+e]()},500)}}}}]);